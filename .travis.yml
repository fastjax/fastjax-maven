# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax
script:
- 'if [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -e -U -DskipRTests -DrepoToken=$REPO_TOKEN clean deploy -P javadoc,report,deploy;
  else
    mvn -e -U -DskipRTests clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: j2Czyz6Dz/MsGUUUfPa2Ue5LhdGlkYy9b3mTavm/lGMotjRG2a2zENL5c6IvEyVajSV5vBnxAuh7MNI8pJaC7EL+dJdZ/rp7xcY3022gIHilzdgdqe6AR/jeM7j5J3UlyxOnTxu3fCKd+kzInxlqMDXti+4z8yIk95q/zUfWD6Oa/PhXoSyxTnNQA/4IhYjvIFXY903PuPzbxI3H3FI7dsuHf3p4+ZF67anrZUsAJBdKYAe0RNCuQkzaL5HiqhwKbb8MJmHIeMO6jc+HDK3pdDc1GsnbWAhkfSTbjauZ2Q1xQff/hB+HGoTiKZoloUaptAUVBE4zIeqtGUqnxzmvfvXjuIH6fAhsMqXXdXrAfoMXqQQ9rO2vJkEaeRAZcISUTLpBNQ2akbCRtDjSI8Fd/vvKTcfUZNyZiA//EDLjyksIZybsjZJfVjdWZrO+583Xy0Fjtf3J1jaxvo+jjyTZqa44HHzGCvLQk3XfEUCxMbeWDZnLIYxG7frFNRH7yDcwzEh/2iz8nCZoQlNoZXqI9L8xgD8VSW7LF4f9RKF7NBqcveuDLj0tqdX5MLTJtbIJDuLPfEMJuBGsWACjxhCFSAEfYGMzlnY4CrjoQnp1lC5UpNc6+HEBSpkiC7kI6HX52NH3UPSwsEtd6xdY1dLMOmgQy2MSTznaI7LvgqEu7gA=
  - secure: EISdJ9zXUvc/fPWbxuvGO7NTp1Nnr2T87JyMMmP4fNhapFfWVyJykjCkWEw2VKl28jv8nrLpL09f0E4GfQPI8dYq92wLKecot4E/Xido6gD8GULGcCxkeLAB6/88jii58FCxr2+/vrTqnsqB8yIBHSKwLwXR9NiSY2tH9klnZbyqsll3OoWgb5LSQ9Cu+yG9EehYfn7W2UwoLQCUuV5puuwl7stUqeXVb3OV5eiauxE8rVnJuaAaCjnz6aXEqBT6m+iUl6SJhp1xOhxIZjqSw42QveHYZ+sOP+2e2I7xnsBLRBsHLEBeQmKf7tC5JoYRREJKX3wLMdSr7JOF3TmyzBaf2VjnZ560ZhKbsupdxRST1f0OoHTCmKsTT2F8m3uAh7j6AWf+VK2Bu2+Te5fGgAdBSfyI1zdyM80gPcw3mhxKcj/2rPzXS6gjt1um3drU2Y/kEHrfwjaVbxQttxV0gTCfTxfmks6uxxwbleauoXqRhU0PeY3EEcnf+Ky9k9oSe0unjnaLkKjwwYgE8ITyTURWFzgSYjf0trUzeBrbJV0VmGh2ydQTGE3GVmSpwrDVJIlNyIOfMNpoue7peHrBCHWpt6pAAdWGwyxbgdD4PnnDlGTS7Y5JhX6ab629Dne2b8C0pLZ68n5fOX2RM9IPCiPsHn2H0/ge8kVNj4XSSSA=
  - secure: d5Rle52Z/HbrxJbVby3L4hL8ldZE3g5/pU6apt6HSR5WSwqyLKm1zbGrXfq+3CP9M9NPom/ap7BONuvPW+/adurl75SweW1m8n8QcWE0Q4We2Lx+pJU/fln6irrX8haylbkej6yuFL5uR+ATSMdIpm8FIim8DpLtAKGr5AFuTk+tVIrZ6aGCPIa6A3OKY/Ind/W7Fwm5lp7XRNmXuWqMT4LOvEuNiO9OH8WOLw+fuNjQsasQrWHuOnWAnW8IMW4LclUEy0O2UMLZT04w1ah0hZST4g8LLg/05fUqABBKi1+gXLGCNm/t93PVDT67KPx/0wU9yrSnL8vc4r1c0VArEBCvPDLqBgA0Xp/UdHG6gQKHEP/jqPCow1+5w3iN3bLHWRzLX+jImE9uyUkKSv/gqC06QIdLNUaEud7Gl023t4p4CTj8iaJcRW16hI1SbnDMcGE/R3mou6qywEjLGDAzPwdZFcYevAqEvLzXtWeDOwTgPgsI3F9mWSBgOnz0YCCQqdkmjPXmO8bEwPDK2v+kWTaDh/Q9DUIo3f3L4j9KuTP/rDpzzBPpJAYeIHQsr1CTIz/5l8hfgzafiftIWsl7Fmfb9Su/G+nnGcHD7RZVm/DTITY8LUoLSYyXhZxnTexWerNemieUk2pTTSWSpGl2+xf8zARx8vZsDGYYUtB5Qzw=
  - secure: FgFBx999kk37AkAmWhjcOUs9EIRkzgYq20g7RpFfIRB0PCU7+pdIFYsmKyuS8KelDtJvrfYC1C20ceiLfLWkzpXhuTj1JCwDFaxzn0jwGSAvK1GX+blONjKZJyHWE0wlpg6k7zhj69JhOamGSfV05MskxCCMdLPq35VzkLSG0tfxI3ou6g3DVqdCV2SL1o4KqgVEOledrChRw4RiDyjEZbd8yjKK+YvH4Ekni7ONphmEI4uD69AXta9dFpggGxbQbH82bE9gP2Yk2HATx1YvdNgV5BEfoFaoi8t+lVL3t4tSONVI+UiEPDpy4Uuw7huP38CGITfKVBm2qDQtgdFbF/cqnz45CmbRe3aVKlok0SyDokLfrSFZRSMxz6CyKHYAqMJz0iI1tdPPselxrNPL/d9JemVYXoxRNI0v4LIjP9+XPzl9WpKD8iML8liPo370nfLmDB+sOKBwizwhxQPRXSbUt+EpeDonWDhrijriixnZjbCK0eCLMctd+yfA1gBEv9EWkASrCatciLRmCk2Pz/4/u8n+xEOo38WfdsUob79SRu6IaJoVPVqTj/HqlcP7aT32I8o/8UaNZ/tAFnOJ1aSM7B1gUQ1WOAd3sfo0BJcabPIXHvNz4QWlRUeWxmGg0lzl5pxCok9kqq9HojHXrYm8Bo+xwtl1J8pVwkysuoA=
  - secure: Qh9OXZ3Bj7A5EDxqJX0bcEJGblfmL9G5/GOfnZXa1GfpNffoS/SdVgvEJJoqOVp/vx0f2Nak8D2eBy6MH+yBEA7ITv1HL1mGVxBOzKjf5HgcD9Fyyl/V2DGRXghAlRwHE8BFhTDozC7BSknI5BgNLrdvHr0aTe8sRk+COoy0Q8trRtrOKKSt6SBtTgOdH4IQVyA4nM5A2eKLxY6K6o4RlhWiJyyg3a4+YOgOHGvvRbCz2WHVr6yhqHcDd90Mx3Z7q+v0gEn87aMzKfqcSuCN9+HP1ySHc/FZe/NVviL0gHjoXnroHV1MBnhB5/vuMj78AmzWfCb9vf8rWkIMdrgpBgHuZ+csavL1/nw471n3rkHBH6njV/9NjIiNkkxaucnrkotg2iKFYhMKmT8oyqEPeIui0kTOiS3VuB12SWdLjePmXH9NOJTIv28urdFkYm2VdtcQgyTvhYNIoBFj3Ig3pcHpbtMR6nSmIPI0Ar08M9IxPlwAud1ad8VUEJiBBLnxUD+zaxPcbNnj/XTQ2uYBbwe8sod8UADuoA3GywJKWRJI6e6Tqm/tqgkQ5q8IgbJe0auXbjiXhjRW2wFjqMDRCOX+/fgqIon2p04R3AKEZmLHa+RehEsYxd2MEP1ooVJxZsGEhGkwlqUeIhgKT5JEJFghgG641E0QKHwslxQ3NG0=
  - secure: PDefZCErawbYzmmpi2ybRSUR9lzPM60ryKCtFCmjuHV2q6Ju3NaUqmxw8AbUY/M5YkROFK5tZnj4pLpSmA+/9XZY6KOSXVqce+d24NSzB2wUa8QKLDOZM3i03ICR3x1TZK5laj36Y4ncj84QVxbrB1HOn7ElOHRttxFSnl/0AGstV1vFfJSlJGEF+5y4Ib24Ws+PbpcbWiP8dLhuWx+rg6cdDirkT5I6ixkJLiCWIGBPHhH5O4DvhqH1e9cs8DplQI+dXF6itRgBWNdkPb0TzRLNs6A0eM8eJ4nVGDaoxsNyLecs6KrFrFjoJbJ3iiJ0OA0y6ca7dh6Hq9DOCN+vB/qAHbx9O10AvCpGIdKBzj/qganCzQmQEQzhTdHcysPMD9k1OHsqmn71VAChZNmzREB0X1k7be2E47lFdxEIQEU4aKYXXoEFUCJahZJW5I1xYyB3UvFDkZzLLg1ySYgj5idPGn2vEZoZZMWS1nmCrr21j9P0QGjfY+Btl/0p5eNlbbP2TnGwRPFZwAdGSy5RiAbtsfkVJVcow8KiJ9+5rUohCTJ5OFsCt8ICoF34hzMz8P10nXhSKfRAbevI+OWxeozD6q36iyn0o45N2CAwY8R2sQWYs0Lbd3WFGpKSSa1UtkbUpsR/MHGPUz8bkU5XIhXETNnh3ZLh/TDqQwSHDWQ=
  - secure: ZN1M9mzvgDgGcIQPO/gJckpf/VgWBYBfZIf1pR4GFUjm25T6gZsi+ofWlBT+FEtkF1Kk9Lx5Ct2H5UvJA+zT0JDVBjJrBfeXGhxu7dwC3wkmCvYdWQHHJjOYxOt+9mNTUCMbUG8BR3tMyhTkTZ79ez8HZAIln/QjknZkSPcPwjE3XxTJV7xHboUU5ego4dPSmWsHomRMKnJQsTy8huuo5BD/OKfZPyvCfUjG0JPKsKy9EyxhEMnyrT5HVJwhwbc+/FIrmK4KU1NUfjasJSlrfRqjBYG87b48NZBBIupkd2ShcLTP0eeOtuMDaphrA70OM63E8sjxAMgQCS9DYphBOyxpw1G34zlkv/nNAKUk7IuYSuXTQs1tnRmYbjfHP/ODy3rkHTdTGQ/0TRUY2Lk9s/pdoAH3MMMjmjGLNCvvsJXgBVlbcbRACYWEHY+BGdkMiyO8qCYbqJpNkGvxvyUXks7IRy+NttdmN5imvt0VVzR0W8qN1bzti3EyAehQirLwJbmzU3o2o/j5FpCoMstiNTbD8ZnLTeFQswsuaZT7nlB+yImrfzV6IwMRyIVum/yKrSTWBjqjw2ijZr9kOLGR+wuhkuJE2nG5frkMqTjHTbDvBr52FkfZDkCmJmclIqHYLAlDpW5xFc7zTpP7iXuxTLxfRjniY9y0lB7PS1rjRHE=
